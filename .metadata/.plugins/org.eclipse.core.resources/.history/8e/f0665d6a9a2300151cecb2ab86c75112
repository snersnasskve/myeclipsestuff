package com.kve.chorerota.notification;

import com.kve.chorerota.ChoreMainActivity;
import com.kve.chorerota.R;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.TaskStackBuilder;
import android.content.Context;
import android.content.Intent;


import android.support.v4.app.NotificationCompat;
import android.support.v4.app.NotificationCompat.Builder;


 public class ChoreNotification {

	static int CHORE_NOTIFY_ID = 0;

	
	public ChoreNotification()
	{
		
	}
	
	public void getChoreNotification(String choreName, Context context)
	{
		NotificationManager notificationManager = (NotificationManager) 
				  context.getSystemService(Context.NOTIFICATION_SERVICE); 
	
	// prepare intent which is triggered if the
		// notification is selected

		Intent resetIntent = new Intent(context, ResetNotficationActivity.class);
		PendingIntent resetPending = PendingIntent.getActivity(context, 0, resetIntent, 0);

		Intent snoozeIntent = new Intent(context, SnoozeNotificationActivity.class);
		PendingIntent snoozePending = PendingIntent.getActivity(context, 0, snoozeIntent, 0);

		Intent cancelIntent = new Intent(context, CancelNotificationActivity.class);
		PendingIntent cancelPending = PendingIntent.getActivity(context, 0, cancelIntent, 0);

		Intent defaultIntent = new Intent(context, NotificationActivity.class);
		PendingIntent defaultPending = PendingIntent.getActivity(context, 0, defaultIntent, 0);

		String notiTitle = context.getResources().getString(R.string.chore_notification);
		String notiText  = context.getResources().getString(R.string.notification_before_chore)
				+ choreName + 
				context.getResources().getString(R.string.notification_after_chore);
				
		
		NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(context)
	    .setSmallIcon(R.drawable.snooze)
	    .setContentTitle(notiTitle)
	    .setContentText(notiText);
		
		mBuilder.setContentIntent(defaultPending);
		
		
		mBuilder.addAction(R.drawable.tick, "Done !", resetPending);
        mBuilder.addAction(R.drawable.snooze, "Snooze", snoozePending);
        mBuilder.addAction(R.drawable.cross  , "Cancel", cancelPending);
/*
	NotificationCompat.InboxStyle inboxStyle =
	        new NotificationCompat.InboxStyle();
	String[] events = new String[6];
	*/

	// The stack builder object will contain an artificial back stack for the
	// started Activity.
	// This ensures that navigating backward from the Activity leads out of
	// your application to the Home screen.
	TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
	// Adds the back stack for the Intent (but not the Intent itself)
	stackBuilder.addParentStack(ChoreMainActivity.class);
	// Adds the Intent that starts the Activity to the top of the stack
	stackBuilder.addNextIntent(defaultIntent);


		  // hide the notification after its selected
	   // noti.flags |= Notification.FLAG_AUTO_CANCEL;

	
	    notificationManager.notify(0, mBuilder.build());	}

	/*
public void getNotification(Context context)
{
	Notification.Builder mBuilder =

        new Notification.Builder(context)
        .setSmallIcon(R.drawable.notification_icon)
        .setContentTitle("My notification")
        .setContentText("Hello World!");
// Creates an explicit intent for an Activity in your app
Intent resultIntent = new Intent(context, NotifiedActivity.class);

// The stack builder object will contain an artificial back stack for the
// started Activity.
// This ensures that navigating backward from the Activity leads out of
// your application to the Home screen.
TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
// Adds the back stack for the Intent (but not the Intent itself)
stackBuilder.addParentStack(NotifiedActivity.class);
// Adds the Intent that starts the Activity to the top of the stack
stackBuilder.addNextIntent(resultIntent);
PendingIntent resultPendingIntent =
        stackBuilder.getPendingIntent(
            0,
            PendingIntent.FLAG_UPDATE_CURRENT
        );
mBuilder.setContentIntent(resultPendingIntent);
NotificationManager mNotificationManager =
    (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
// mId allows you to update the notification later on.
mNotificationManager.notify(mId, mBuilder.build());
}
*/
}